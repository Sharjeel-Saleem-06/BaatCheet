//
//  SwiftAppTemplate
//
//  Created by Afaq Ahmad on 25/04/24.
//

import SwiftUI

struct AppStrings {
    //MARK: - Login
    static let login: LocalizedStringKey = "loginText"
    static let password: LocalizedStringKey = "password"
    static let title: LocalizedStringKey = "title"
    static let createOneHere : LocalizedStringKey = "createOneHere"
    static let dontHaveYet: LocalizedStringKey = "dontHaveYet"
    static let emailPasswordFieldCantBeEmpty : LocalizedStringKey = "emailPasswordFieldCantBeEmpty"
    
    //MARK: - Choose Tennis School
    static let chooseTennisSchool      : LocalizedStringKey = "chooseTennisSchool"
    
    //MARK: - Register Account
    static let registerAccount         : LocalizedStringKey = "registerAccount"
    static let month                   : LocalizedStringKey = "MM"
//    static let year                    : LocalizedStringKey = "YYYY"
    static let termsAndConditions      : LocalizedStringKey = "termsAndConditions"
    static let dateOfBirth             : LocalizedStringKey = "dateOfBirth"
    static let firstNamePlaceHolder    : LocalizedStringKey = "firstname"
    static let lastNamePlaceHolder     : LocalizedStringKey = "lastname"
    static let emailPlaceHolder        : LocalizedStringKey = "emailPlaceHolder"
    static let termsANDConditionWebText: LocalizedStringKey = "termsANDConditionWebText"
    static let nextbuttontitle         : LocalizedStringKey = "nextButtonTitle"
    static let choose                  : LocalizedStringKey = "choose"
    static let checkInputField         : LocalizedStringKey = "checkInputField"
    static let enterVaildEmail         : LocalizedStringKey = "enterVaildEmail"
    static let enterFirstName          : LocalizedStringKey = "enterFirstName"
    static let enterLastName           : LocalizedStringKey = "enterLastName"
    static let chooseGender            : LocalizedStringKey = "chooseGender"
    static let enterDateOfBirth        : LocalizedStringKey = "enterDateOfBirth"
    static let userIsAdult             : LocalizedStringKey = "userIsAdult"
    static let male                    : LocalizedStringKey = "male"
    static let female                  : LocalizedStringKey = "female"
    static let mobileNumber            : LocalizedStringKey = "mobileNumber"
    static let enterMobileNumber       : LocalizedStringKey = "entermobileNumber"
    static let warning                 : LocalizedStringKey = "warning"
    static let selectTermsCondition    : LocalizedStringKey = "selectTermsCondition"
    static let years                   : LocalizedStringKey = "years"
    
    //MARK: - Create Password Screen
    static let createPassword: LocalizedStringKey = "createPassword"
    static let confirmPassword: LocalizedStringKey = "confirmPassword"
//    static let resetPasswordMessage: LocalizedStringKey = "resetPasswordMessage"
    static let passwordNotMatches : LocalizedStringKey = "passwordNotMatches"
    static let passwordFieldCantEmpty : LocalizedStringKey = "passwordFieldCantEmpty"
    static let confirmPasswordFieldCantEmpty : LocalizedStringKey = "confirmPasswordFieldCantEmpty"
    static let resetPasswordOtpMessage : LocalizedStringKey = "resetPasswordOtpMessage"
    static let signUpOtpMessage        : LocalizedStringKey = "signUpOtpMessage"
    static let minLengthOfPassword     : LocalizedStringKey = "minLengthOfPassword"
    static let passwordPolicyMessage   : LocalizedStringKey = "passwordPolicyMessage"
    
    //MARK: Reset Password Screen
    static let resetPassword           : LocalizedStringKey = "resetPassword"
    static let choosePassword          : LocalizedStringKey = "choosePassword"
    static let save                    : LocalizedStringKey = "save"
    static let send                    : LocalizedStringKey = "send"
    static let sent                    : LocalizedStringKey = "sent"
    static let emailFieldCantBeEmpty   : LocalizedStringKey = "emailFieldCantBeEmpty"
    static let invalidEmailString      : LocalizedStringKey = "invalidEmailString"
    
    //MARK: - Reset Password Confirmation Screen
    static let toConfirm : LocalizedStringKey = "toconfirm"
    static let requestCodeAgain : LocalizedStringKey = "requestCodeAgain"
    static let confirmOtpGuideMessage : LocalizedStringKey = "confirmOtpGuideMessage"
    static let willSendOtpToEmailMEssage : LocalizedStringKey = "willSendOtpToEmailMEssage"
    static let checkOtpisIncorrect : LocalizedStringKey = "checkOtpisIncorrect"
    static let otpSuccessMessage   : LocalizedStringKey = "otpSuccessMessage"
//    static let successful : LocalizedStringKey = "successfull"
    
    //MARK: - AcceptTermsAndConditionsScreen
//    static let dummyTermsAndConditions: LocalizedStringKey = "dummyTermsAndConditions"

    //MARK: - OnboardingScreen
//    static let onboarding: LocalizedStringKey = "onboarding"
    static let next: LocalizedStringKey = "next"
    static let getStarted: LocalizedStringKey = "getStarted"


    //MARK: - Settings
    static let settings                : LocalizedStringKey = "settings"
    static let name                    : LocalizedStringKey = "name"
    static let email                   : LocalizedStringKey = "email"
    static let gender                  : LocalizedStringKey = "gender"
    static let country                 : LocalizedStringKey = "country"
    static let language                : LocalizedStringKey = "language"
    static let update                  : LocalizedStringKey = "update"
    static let appearance              : LocalizedStringKey = "appearance"
    static let light                   : LocalizedStringKey = "light"
    static let dark                    : LocalizedStringKey = "dark"
    static let logoutBottomSheetTitle  : LocalizedStringKey = "logoutBottomSheetTitle"
    static let deleteAccountBottomSheetTitle: LocalizedStringKey = "deleteAccountBottomSheetTitle"
    static let logoutBottomSheetSubTitle: LocalizedStringKey = "logoutBottomSheetSubTitle"
    static let deleteAccountBottomSheetSubTitle: LocalizedStringKey = "deleteAccountBottomSheetSubTitle"
  
    //MARK: - User Details
    static let updateUserDetails       : LocalizedStringKey = "updateUserDetails"
    static let genderPlaceHolder       : LocalizedStringKey = "genderPlaceHolder"
    static let dateOfBirthPlaceHolder  : LocalizedStringKey = "dateOfBirthPlaceHolder"
    static let selectCountry           : LocalizedStringKey = "selectCountry"
    static let selectCountryPlaceHolder: LocalizedStringKey = "selectCountryPlaceHolder"
    static let selectLanguage          : LocalizedStringKey = "selectLanguage"
    static let selectLanguagePlaceHolder: LocalizedStringKey = "selectLanguagePlaceHolder"
    static let done                    : LocalizedStringKey = "done"
    static let saveUserInfoBottomSheetTitle: LocalizedStringKey = "saveUserInfoBottomSheetTitle"
    static let saveUserInfoBottomSheetSubTitle: LocalizedStringKey = "saveUserInfoBottomSheetSubTitle"
    static let userDetails             : LocalizedStringKey = "userDetails"
    static let continueString          : LocalizedStringKey = "continue"

    //MARK: - Details
    static let details                 : LocalizedStringKey = "details"
    static let cancel                  : LocalizedStringKey = "cancel"
    static let yesSure                 : LocalizedStringKey = "yesSure"
    static let tab                     : LocalizedStringKey = "tab"
    static let comingSoonString        : LocalizedStringKey = "comingSoonString"
    static let alert                   : LocalizedStringKey = "alert"
    static let met                     : LocalizedStringKey = "met"
    
    //MARK: - Error Message
    static let error: LocalizedStringKey = "error"
    static let errorMessage: LocalizedStringKey = "errorMessage"
    static let oK: LocalizedStringKey = "oK"
//    static let failed: LocalizedStringKey = "failed"


    //MARK: - HomeScreen
    static let homeScreenTitle         : LocalizedStringKey = "homeScreenTitle"
    
    //MARK: -  TrainingDetail(Student)
    static let package                 : LocalizedStringKey = "package"
    static let participant             : LocalizedStringKey = "participant"
    static let day                     : LocalizedStringKey = "day"
    static let time                    : LocalizedStringKey = "time"
    static let present                 : LocalizedStringKey = "present"
    static let presence                : LocalizedStringKey = "presence"
    static let absent                  : LocalizedStringKey = "absent"
    static let attendanceString        : LocalizedStringKey = "attendenceString"
    static let payment                 : LocalizedStringKey = "payments"
    
    //MARK: -  TrainingTimeLine(Student)
    static let upcomingTrainings       : LocalizedStringKey = "upcomingTrainings"
    static let training                : LocalizedStringKey = "training"
    static let noTrainingsMessage      : LocalizedStringKey = "noTrainingsMessage"
    
    //MARK: -  TrainerDetail
    static let trainer                 : LocalizedStringKey = "trainer"
    static let sendMessage             : LocalizedStringKey = "sendMessage"
    static let telephone               : LocalizedStringKey = "telephone"
    static let call                    : LocalizedStringKey = "call"
    static let message                 : LocalizedStringKey = "message"
    static let generalTermsAndCondition: LocalizedStringKey = "generalTermsAndCondition"
    static let allStudentPresent       : LocalizedStringKey = "allStudentPresent"
    static let tought                  : LocalizedStringKey = "tought"
    static let cancelLesson            : LocalizedStringKey = "cancelLesson"
    static let finishLesson            : LocalizedStringKey = "finishLesson"
    static let adjustPresent           : LocalizedStringKey = "adjustPresence"

    //MARK: - Forgot password
    static let forgotPassword          : LocalizedStringKey = "forgotPassword"
    static let student                 : LocalizedStringKey = "student"
    
    //MARK: - Profile Screen
    static let phoneNumber             : LocalizedStringKey = "telephone"
    static let changePassword          : LocalizedStringKey = "changePassword"
    static let version                 : LocalizedStringKey = "version"
    static let helpCentre              : LocalizedStringKey = "helpCentre"
    static let termsAndConditionsProfile: LocalizedStringKey = "generalTermsAndCondition"
    static let logout                  : LocalizedStringKey = "logout"
    static let deleteAccount           : LocalizedStringKey = "deleteAccount"
    static let account                 : LocalizedStringKey = "account"
    static let logOutOfYourAccount     : LocalizedStringKey = "logOutOfYourAccount"
    
    //MARK: - TrainingTimeLine(Teacher)
    static let today                   : LocalizedStringKey = "today"
    static let lessonString            : LocalizedStringKey = "lessonString"

    //MARK: TABBAR
    static let chat                    : LocalizedStringKey = "chat"
    
    //MARK: CANCEL TRAINING
    static let status                  : LocalizedStringKey = "status"
    static let disease                 : LocalizedStringKey = "disease"
    static let rain                    : LocalizedStringKey = "rain"
    static let other                   : LocalizedStringKey = "other"
    static let rode                    : LocalizedStringKey = "rode"
    static let sendAndSave             : LocalizedStringKey = "sendAndSave"
    static let lessonContinues         : LocalizedStringKey = "lessonContinues"
    static let successful : LocalizedStringKey = "successful"
    static let multipleStudents : LocalizedStringKey = "multipleStudents"
}


extension LocalizedStringKey {
    var stringKey: String? {
        Mirror(reflecting: self).children.first(where: { $0.label == "key" })?.value as? String
    }
    
    func stringValue(locale: Locale = .current) -> String {
//        guard let key = Mirror(reflecting: self).children.first(where: { $0.label == "key" })?.value as? String else {
//                    return ""
//                }
//        return NSLocalizedString(key, comment: "")
        return String.localizedString(for: self.stringKey ?? "", locale: locale)
    }
}

extension String {
    static func localizedString(for key: String, locale: Locale = .current) -> String {
        guard let key = key.addingPercentEncoding(withAllowedCharacters: .urlHostAllowed) else { return key }
        
        let language = locale.languageCode ?? "en"
        
        // Try fetching from downloaded localization files
        if let localizedText = LocalisationManager.shared.getLocalizedText(for: key, language: language) {
            return localizedText
        }
        
        // Fallback to app bundle localization
        if let path = Bundle.main.path(forResource: language, ofType: "lproj"),
           let bundle = Bundle(path: path) {
            return NSLocalizedString(key, bundle: bundle, comment: "")
        }
        
        return key // Return key as a last resort
    }
}

